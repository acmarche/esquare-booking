<div class="dropdown-menu-calendar p-2 shadow rounded-3" style="width: 340px" id="dropdownCalendar">
    <div class="d-grid gap-1">
        <div class="cal">
            <div class="cal-month">
                <button class="btn cal-btn" type="button">
                    <svg class="bi" width="16" height="16">
                        <use xlink:href="#arrow-left-short"></use>
                    </svg>
                </button>
                <strong class="cal-month-name">{{ monthName }}</strong>
                <select class="form-select cal-month-name d-none">
                    <option value="January">January</option>
                    <option value="February">February</option>
                    <option value="March">March</option>
                    <option value="April">April</option>
                    <option value="May">May</option>
                    <option selected="" value="June">June</option>
                    <option value="July">July</option>
                    <option value="August">August</option>
                    <option value="September">September</option>
                    <option value="October">October</option>
                    <option value="November">November</option>
                    <option value="December">December</option>
                </select>
                <button class="btn cal-btn" type="button">
                    <svg class="bi" width="16" height="16">
                        <use xlink:href="#arrow-right-short"></use>
                    </svg>
                </button>
            </div>

            <div class="cal-weekdays text-muted">
                {% for weekday in weekdays %}
                    <div class="cal-weekday">{{ weekday }}</div>
                {% endfor %}
            </div>

            <div class="cal-days">
                {% for week in weeks %}
                    {% for day in week %}
                        {% set key = day.toDateString %}
                        {% set data = dataDays[key] %} <!-- phpstorm -->
                        {% if data.entries|length > 0 %}
                            <button class="btn cal-btn bg-info bookingclick"
                                    type="button"
                                    data-bs-toggle="modal"
                                    data-bs-target="#infoModal"
                                    data-day="{{ day.year }}-{{ day.month }}-{{ day.day }}">
                                {{ day.day }}
                            </button>
                        {% else %}
                            <button class="btn cal-btn" type="button">{{ day.day }}</button>
                        {% endif %}
                    {% endfor %}
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% include '_modal.html.twig' %}
<script>
    document.addEventListener("DOMContentLoaded", function () {
        var btns = document.querySelectorAll('.bookingclick');
        Array.prototype.forEach.call(btns, function (el, i) {
            el.addEventListener('click', () => {
                console.log('click ' + el.dataset.day);
                getEntries(el.dataset.day);
            });
        });
    });

    async function getEntries(date) {
        let room = {{ room }};
        const url = `/wp-json/booking/entries/${date}/${room}`;
        const response = await fetch(url);
        let dataJson = await response.text();
        document.querySelector("#contentmodal").innerHTML = JSON.parse(dataJson);
    }

</script>
